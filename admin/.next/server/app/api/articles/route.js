"use strict";(()=>{var e={};e.id=9573,e.ids=[9573],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},2615:e=>{e.exports=require("http")},8791:e=>{e.exports=require("https")},8621:e=>{e.exports=require("punycode")},6162:e=>{e.exports=require("stream")},7360:e=>{e.exports=require("url")},1568:e=>{e.exports=require("zlib")},975:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>h,patchFetch:()=>I,requestAsyncStorage:()=>g,routeModule:()=>d,serverHooks:()=>x,staticGenerationAsyncStorage:()=>m});var a={};r.r(a),r.d(a,{GET:()=>c,POST:()=>p,dynamic:()=>l});var s=r(9303),o=r(8716),n=r(670),i=r(7070),u=r(5662);let l="force-dynamic";async function c(e){try{let{data:e,error:t}=await u.O.from("articles").select("*").order("created_at",{ascending:!1});if(t)return console.error("Supabase error:",t),i.NextResponse.json({error:"Failed to fetch articles",details:t.message},{status:500});return i.NextResponse.json({articles:e||[],pagination:{page:1,limit:20,total:e?.length||0,totalPages:Math.ceil((e?.length||0)/20)}})}catch(e){return console.error("API error:",e),i.NextResponse.json({error:"Internal server error"},{status:500})}}async function p(e){try{let t=e.cookies.get("supabase_token")?.value;if(!t)return i.NextResponse.json({error:"Authentication required"},{status:401});let{data:{user:r},error:a}=await u.O.auth.getUser(t);if(a||!r)return i.NextResponse.json({error:"Invalid token"},{status:401});let s=await e.json(),{data:o,error:n}=await u.O.from("articles").insert([{title:s.title,description:s.description,content:s.content,category:s.category||"general",status:s.status||"draft",image_url:s.image_url,gallery:s.gallery?JSON.stringify(s.gallery):null,author:s.author||r.email,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}]).select().single();if(n)return console.error("Supabase error:",n),i.NextResponse.json({error:"Failed to create article"},{status:500});return i.NextResponse.json({article:o},{status:201})}catch(e){return console.error("API error:",e),i.NextResponse.json({error:"Internal server error"},{status:500})}}let d=new s.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/articles/route",pathname:"/api/articles",filename:"route",bundlePath:"app/api/articles/route"},resolvedPagePath:"/Users/nattagid/GitHub/greenbluerestbangkok/admin/app/api/articles/route.ts",nextConfigOutput:"standalone",userland:a}),{requestAsyncStorage:g,staticGenerationAsyncStorage:m,serverHooks:x}=d,h="/api/articles/route";function I(){return(0,n.patchFetch)({serverHooks:x,staticGenerationAsyncStorage:m})}},5662:(e,t,r)=>{r.d(t,{O:()=>a});let a=(0,r(4738).eI)("https://gmdvkegcejrbrobtrhfm.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdtZHZrZWdjZWpyYnJvYnRyaGZtIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MjYzMDUzNDIsImV4cCI6MjA0MTg4MTM0Mn0.xf2zwnE8davt7K0K3EPlYkNbiV4qKEfCYNn76xFvZQo")}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[9276,5972,4738],()=>r(975));module.exports=a})();