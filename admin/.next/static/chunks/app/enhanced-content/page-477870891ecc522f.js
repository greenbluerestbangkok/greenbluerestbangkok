(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[21],{4692:function(e,t,a){Promise.resolve().then(a.bind(a,2648))},2648:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return l}});var s=a(7437),r=a(2265),n=a(7648);function l(){let[e,t]=(0,r.useState)([]),[a,l]=(0,r.useState)(!0),[i,c]=(0,r.useState)(null),[d,o]=(0,r.useState)(""),[x,h]=(0,r.useState)(""),[u,m]=(0,r.useState)(""),[p,g]=(0,r.useState)(""),[j,f]=(0,r.useState)({page:1,limit:20,total:0,totalPages:0}),b=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;try{l(!0);let a=new URLSearchParams({page:e.toString(),limit:"20",...d&&{search:d},...x&&{category:x},...u&&{status:u},...p&&{type:p}}),s=await fetch("/admin/api/enhanced-content?".concat(a)),r=await s.json();if(!s.ok)throw Error(r.error||"Failed to fetch content");t(r.contents),f(r.pagination),c(null)}catch(e){c(e instanceof Error?e.message:"Failed to fetch content")}finally{l(!1)}};(0,r.useEffect)(()=>{b()},[d,x,u,p]);let v=async(e,t)=>{if(confirm('คุณต้องการลบเนื้อหา "'.concat(t,'" หรือไม่?')))try{let t=await fetch("/admin/api/enhanced-content/".concat(e),{method:"DELETE"});if(!t.ok){let e=await t.json();throw Error(e.error||"Failed to delete content")}b(j.page)}catch(e){alert(e instanceof Error?e.message:"Failed to delete content")}},y=async(e,t)=>{try{let a=await fetch("/admin/api/enhanced-content/".concat(e),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:"published"===t?"draft":"published"})});if(!a.ok){let e=await a.json();throw Error(e.error||"Failed to update content status")}b(j.page)}catch(e){alert(e instanceof Error?e.message:"Failed to update content status")}},N=e=>{switch(e){case"published":return"badge-success";case"draft":default:return"badge-warning";case"archived":return"badge-error"}},w=e=>{switch(e){case"published":return"เผยแพร่แล้ว";case"draft":return"ร่าง";case"archived":return"เก็บถาวร";default:return e}},k=e=>{switch(e){case"blog":return"บทความ";case"vlog":return"วิดีโอ";case"news":return"ข่าวสาร";case"guide":return"คู่มือ";default:return e}},S=e=>{switch(e){case"article":return"บทความ";case"video":return"วิดีโอ";case"gallery":return"แกลเลอรี่";default:return e}};return a?(0,s.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,s.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,s.jsx)("div",{className:"spinner"})})}):(0,s.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"จัดการเนื้อหาขั้นสูง"}),(0,s.jsx)("p",{className:"text-gray-600",children:"จัดการบทความ วิดีโอ และเนื้อหาอื่นๆ"})]}),(0,s.jsx)(n.default,{href:"/admin/enhanced-content/new",className:"btn-primary",children:"เพิ่มเนื้อหาใหม่"})]}),(0,s.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6",children:(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"form-label",children:"ค้นหาเนื้อหา"}),(0,s.jsx)("input",{type:"text",placeholder:"ค้นหาตามหัวข้อหรือเนื้อหา...",value:d,onChange:e=>o(e.target.value),className:"form-input"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"form-label",children:"หมวดหมู่"}),(0,s.jsxs)("select",{value:x,onChange:e=>h(e.target.value),className:"form-input",children:[(0,s.jsx)("option",{value:"",children:"ทุกหมวดหมู่"}),(0,s.jsx)("option",{value:"blog",children:"บทความ"}),(0,s.jsx)("option",{value:"vlog",children:"วิดีโอ"}),(0,s.jsx)("option",{value:"news",children:"ข่าวสาร"}),(0,s.jsx)("option",{value:"guide",children:"คู่มือ"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"form-label",children:"ประเภท"}),(0,s.jsxs)("select",{value:p,onChange:e=>g(e.target.value),className:"form-input",children:[(0,s.jsx)("option",{value:"",children:"ทุกประเภท"}),(0,s.jsx)("option",{value:"article",children:"บทความ"}),(0,s.jsx)("option",{value:"video",children:"วิดีโอ"}),(0,s.jsx)("option",{value:"gallery",children:"แกลเลอรี่"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"form-label",children:"สถานะ"}),(0,s.jsxs)("select",{value:u,onChange:e=>m(e.target.value),className:"form-input",children:[(0,s.jsx)("option",{value:"",children:"ทุกสถานะ"}),(0,s.jsx)("option",{value:"published",children:"เผยแพร่แล้ว"}),(0,s.jsx)("option",{value:"draft",children:"ร่าง"}),(0,s.jsx)("option",{value:"archived",children:"เก็บถาวร"})]})]}),(0,s.jsx)("div",{className:"flex items-end",children:(0,s.jsx)("button",{onClick:()=>b(1),className:"btn-secondary w-full",children:"ค้นหา"})})]})}),i&&(0,s.jsx)("div",{className:"alert alert-error mb-6",children:i}),(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,s.jsx)("thead",{className:"bg-gray-50",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"เนื้อหา"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"หมวดหมู่"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"ประเภท"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"สถานะ"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"วันที่"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"จัดการ"})]})}),(0,s.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:0===e.length?(0,s.jsx)("tr",{children:(0,s.jsx)("td",{colSpan:6,className:"px-6 py-12 text-center text-gray-500",children:"ไม่พบเนื้อหา"})}):e.map(e=>(0,s.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,s.jsx)("td",{className:"px-6 py-4",children:(0,s.jsxs)("div",{className:"flex items-center",children:[e.image&&(0,s.jsx)("img",{src:e.image,alt:e.title,className:"h-12 w-12 rounded-lg object-cover mr-4"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.title}),(0,s.jsx)("div",{className:"text-sm text-gray-500",children:e.excerpt||e.content.substring(0,100)+"..."}),e.author&&(0,s.jsxs)("div",{className:"text-xs text-gray-400",children:["โดย: ",e.author]})]})]})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsx)("span",{className:"badge badge-info",children:k(e.category)})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsx)("span",{className:"badge badge-secondary",children:S(e.type)})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("span",{className:"badge ".concat(N(e.status)),children:w(e.status)}),e.featured&&(0,s.jsx)("span",{className:"badge badge-warning",children:"แนะนำ"})]})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.publishedAt?new Date(e.publishedAt).toLocaleDateString("th-TH"):e.createdAt?new Date(e.createdAt).toLocaleDateString("th-TH"):"-"}),(0,s.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium space-x-2",children:[(0,s.jsx)(n.default,{href:"/admin/enhanced-content/".concat(e.id),className:"text-indigo-600 hover:text-indigo-900",children:"แก้ไข"}),(0,s.jsx)("button",{onClick:()=>y(e.id,e.status),className:"".concat("published"===e.status?"text-orange-600 hover:text-orange-900":"text-green-600 hover:text-green-900"),children:"published"===e.status?"เป็นร่าง":"เผยแพร่"}),(0,s.jsx)("button",{onClick:()=>v(e.id,e.title),className:"text-red-600 hover:text-red-900",children:"ลบ"})]})]},e.id))})]})}),j.totalPages>1&&(0,s.jsx)("div",{className:"bg-white px-4 py-3 border-t border-gray-200 sm:px-6",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"text-sm text-gray-700",children:["แสดง ",(j.page-1)*j.limit+1," ถึง"," ",Math.min(j.page*j.limit,j.total)," จาก"," ",j.total," รายการ"]}),(0,s.jsxs)("div",{className:"flex space-x-2",children:[(0,s.jsx)("button",{onClick:()=>b(j.page-1),disabled:1===j.page,className:"btn-secondary disabled:opacity-50 disabled:cursor-not-allowed",children:"ก่อนหน้า"}),(0,s.jsxs)("span",{className:"px-3 py-2 text-sm text-gray-700",children:["หน้า ",j.page," จาก ",j.totalPages]}),(0,s.jsx)("button",{onClick:()=>b(j.page+1),disabled:j.page===j.totalPages,className:"btn-secondary disabled:opacity-50 disabled:cursor-not-allowed",children:"ถัดไป"})]})]})})]})]})}}},function(e){e.O(0,[648,971,117,744],function(){return e(e.s=4692)}),_N_E=e.O()}]);