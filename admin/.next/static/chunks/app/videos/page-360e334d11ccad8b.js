(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[55],{5992:function(e,s,t){Promise.resolve().then(t.bind(t,7506))},7506:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return i}});var l=t(7437),a=t(2265),r=t(9376);function i(){let[e,s]=(0,a.useState)([]),[t,i]=(0,a.useState)(!0),[n,d]=(0,a.useState)(""),[c,o]=(0,a.useState)("all"),u=(0,r.useRouter)();(0,a.useEffect)(()=>{x()},[]);let x=async()=>{try{let e=await fetch("/api/videos");if(e.ok){let t=await e.json();s(t)}else console.error("Failed to fetch videos")}catch(e){console.error("Error fetching videos:",e)}finally{i(!1)}},h=async t=>{if(confirm("คุณต้องการลบวิดีโอนี้หรือไม่?"))try{(await fetch("/api/videos/".concat(t),{method:"DELETE"})).ok?s(e.filter(e=>e.id!==t)):alert("เกิดข้อผิดพลาดในการลบวิดีโอ")}catch(e){console.error("Error deleting video:",e),alert("เกิดข้อผิดพลาดในการลบวิดีโอ")}},g=async(t,l)=>{let a="published"===l?"draft":"published";try{(await fetch("/api/videos/".concat(t),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:a})})).ok?s(e.map(e=>e.id===t?{...e,status:a}:e)):alert("เกิดข้อผิดพลาดในการอัปเดตสถานะ")}catch(e){console.error("Error updating video status:",e),alert("เกิดข้อผิดพลาดในการอัปเดตสถานะ")}},m=e.filter(e=>{let s=e.title.toLowerCase().includes(n.toLowerCase())||e.description.toLowerCase().includes(n.toLowerCase()),t="all"===c||e.status===c;return s&&t});return t?(0,l.jsx)("div",{className:"min-h-screen bg-gray-50 p-6",children:(0,l.jsx)("div",{className:"max-w-7xl mx-auto",children:(0,l.jsxs)("div",{className:"animate-pulse",children:[(0,l.jsx)("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-6"}),(0,l.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[...Array(6)].map((e,s)=>(0,l.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,l.jsx)("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-4"}),(0,l.jsx)("div",{className:"h-3 bg-gray-200 rounded w-1/2"})]},s))})]})})}):(0,l.jsx)("div",{className:"min-h-screen bg-gray-50 p-6",children:(0,l.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,l.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"จัดการวิดีโอ"}),(0,l.jsx)("button",{onClick:()=>u.push("/videos/new"),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"เพิ่มวิดีโอใหม่"})]}),(0,l.jsx)("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:(0,l.jsxs)("div",{className:"flex flex-col md:flex-row gap-4",children:[(0,l.jsx)("div",{className:"flex-1",children:(0,l.jsx)("input",{type:"text",placeholder:"ค้นหาวิดีโอ...",value:n,onChange:e=>d(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})}),(0,l.jsxs)("select",{value:c,onChange:e=>o(e.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,l.jsx)("option",{value:"all",children:"ทุกสถานะ"}),(0,l.jsx)("option",{value:"published",children:"เผยแพร่แล้ว"}),(0,l.jsx)("option",{value:"draft",children:"ร่าง"})]})]})}),(0,l.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:m.map(e=>(0,l.jsx)("div",{className:"bg-white rounded-lg shadow hover:shadow-lg transition-shadow",children:(0,l.jsxs)("div",{className:"p-6",children:[(0,l.jsx)("div",{className:"aspect-video bg-gray-200 rounded-lg mb-4 flex items-center justify-center",children:e.thumbnail_url?(0,l.jsx)("img",{src:e.thumbnail_url,alt:e.title,className:"w-full h-full object-cover rounded-lg"}):(0,l.jsx)("div",{className:"text-gray-400",children:(0,l.jsx)("svg",{className:"w-12 h-12",fill:"currentColor",viewBox:"0 0 20 20",children:(0,l.jsx)("path",{d:"M10 12l-4-4h8l-4 4z"})})})}),(0,l.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2 line-clamp-2",children:e.title}),(0,l.jsx)("p",{className:"text-gray-600 text-sm mb-4 line-clamp-3",children:e.description}),(0,l.jsxs)("div",{className:"flex items-center justify-between text-sm text-gray-500 mb-4",children:[(0,l.jsx)("span",{className:"bg-blue-100 text-blue-800 px-2 py-1 rounded",children:e.category}),(0,l.jsx)("span",{children:e.duration})]}),(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)("span",{className:"px-2 py-1 rounded text-xs ".concat("published"===e.status?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"),children:"published"===e.status?"เผยแพร่แล้ว":"ร่าง"}),(0,l.jsxs)("div",{className:"flex space-x-2",children:[(0,l.jsx)("button",{onClick:()=>g(e.id,e.status),className:"px-3 py-1 rounded text-xs ".concat("published"===e.status?"bg-yellow-100 text-yellow-800 hover:bg-yellow-200":"bg-green-100 text-green-800 hover:bg-green-200"),children:"published"===e.status?"ปิดการเผยแพร่":"เผยแพร่"}),(0,l.jsx)("button",{onClick:()=>u.push("/videos/".concat(e.id,"/edit")),className:"bg-blue-100 text-blue-800 px-3 py-1 rounded text-xs hover:bg-blue-200",children:"แก้ไข"}),(0,l.jsx)("button",{onClick:()=>h(e.id),className:"bg-red-100 text-red-800 px-3 py-1 rounded text-xs hover:bg-red-200",children:"ลบ"})]})]})]})},e.id))}),0===m.length&&(0,l.jsxs)("div",{className:"text-center py-12",children:[(0,l.jsx)("div",{className:"text-gray-400 mb-4",children:(0,l.jsx)("svg",{className:"w-16 h-16 mx-auto",fill:"currentColor",viewBox:"0 0 20 20",children:(0,l.jsx)("path",{d:"M10 12l-4-4h8l-4 4z"})})}),(0,l.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"ไม่มีวิดีโอ"}),(0,l.jsx)("p",{className:"text-gray-500 mb-4",children:n||"all"!==c?"ไม่พบวิดีโอที่ตรงกับเงื่อนไขการค้นหา":"เริ่มต้นด้วยการเพิ่มวิดีโอใหม่"}),!n&&"all"===c&&(0,l.jsx)("button",{onClick:()=>u.push("/videos/new"),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"เพิ่มวิดีโอใหม่"})]})]})})}},9376:function(e,s,t){"use strict";var l=t(5475);t.o(l,"useParams")&&t.d(s,{useParams:function(){return l.useParams}}),t.o(l,"useRouter")&&t.d(s,{useRouter:function(){return l.useRouter}})}},function(e){e.O(0,[971,117,744],function(){return e(e.s=5992)}),_N_E=e.O()}]);