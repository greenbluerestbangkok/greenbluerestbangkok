(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[457],{1591:function(e,s,a){Promise.resolve().then(a.bind(a,2489))},2489:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return n}});var t=a(7437),l=a(2265),i=a(9376);function n(){let e=(0,i.useParams)(),s=(0,i.useRouter)(),a=e.id,[n,r]=(0,l.useState)(null),[c,o]=(0,l.useState)(!0),[d,u]=(0,l.useState)(!1);(0,l.useEffect)(()=>{h()},[a]);let h=async()=>{try{let e=await fetch("/api/videos/".concat(a));if(e.ok){let s=await e.json();r(s.video)}}catch(e){console.error("Failed to fetch video:",e)}finally{o(!1)}},m=async e=>{e.preventDefault(),u(!0);try{(await fetch("/api/videos/".concat(a),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)})).ok?(alert("บันทึกสำเร็จ!"),s.push("/videos")):alert("เกิดข้อผิดพลาด")}catch(e){alert("เกิดข้อผิดพลาด: "+e)}finally{u(!1)}};return c?(0,t.jsx)("div",{className:"flex justify-center items-center h-screen",children:(0,t.jsx)("div",{className:"spinner"})}):n?(0,t.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsx)("button",{onClick:()=>s.push("/videos"),className:"text-gray-600 hover:text-gray-900 mb-4",children:"← กลับ"}),(0,t.jsxs)("h1",{className:"text-3xl font-bold text-gray-900",children:["แก้ไขวิดีโอ: ",n.title]})]}),(0,t.jsxs)("form",{onSubmit:m,className:"space-y-6",children:[(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"ข้อมูลวิดีโอ"}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"form-label",children:"ชื่อวิดีโอ"}),(0,t.jsx)("input",{type:"text",value:n.title||"",onChange:e=>r({...n,title:e.target.value}),className:"form-input",required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"form-label",children:"URL วิดีโอ (YouTube)"}),(0,t.jsx)("input",{type:"url",value:n.video_url||"",onChange:e=>r({...n,video_url:e.target.value}),className:"form-input",required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"form-label",children:"คำอธิบาย"}),(0,t.jsx)("textarea",{value:n.description||"",onChange:e=>r({...n,description:e.target.value}),className:"form-input min-h-[100px]",required:!0})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"form-label",children:"ระยะเวลา"}),(0,t.jsx)("input",{type:"text",value:n.duration||"",onChange:e=>r({...n,duration:e.target.value}),className:"form-input"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"form-label",children:"หมวดหมู่"}),(0,t.jsxs)("select",{value:n.category||"introduction",onChange:e=>r({...n,category:e.target.value}),className:"form-input",children:[(0,t.jsx)("option",{value:"introduction",children:"แนะนำ"}),(0,t.jsx)("option",{value:"activity",children:"กิจกรรม"}),(0,t.jsx)("option",{value:"workshop",children:"Workshop"}),(0,t.jsx)("option",{value:"event",children:"งานอีเว้นท์"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"form-label",children:"สถานะ"}),(0,t.jsxs)("select",{value:n.status||"draft",onChange:e=>r({...n,status:e.target.value}),className:"form-input",children:[(0,t.jsx)("option",{value:"draft",children:"ร่าง"}),(0,t.jsx)("option",{value:"published",children:"เผยแพร่"})]})]})]})]})]}),(0,t.jsxs)("div",{className:"flex justify-end space-x-4",children:[(0,t.jsx)("button",{type:"button",onClick:()=>s.push("/videos"),className:"btn-secondary",children:"ยกเลิก"}),(0,t.jsx)("button",{type:"submit",disabled:d,className:"btn-primary disabled:opacity-50",children:d?"กำลังบันทึก...":"บันทึกการเปลี่ยนแปลง"})]})]})]}):(0,t.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"ไม่พบวิดีโอ"}),(0,t.jsx)("button",{onClick:()=>s.push("/videos"),className:"btn-primary",children:"กลับ"})]})})}},9376:function(e,s,a){"use strict";var t=a(5475);a.o(t,"useParams")&&a.d(s,{useParams:function(){return t.useParams}}),a.o(t,"useRouter")&&a.d(s,{useRouter:function(){return t.useRouter}})}},function(e){e.O(0,[971,117,744],function(){return e(e.s=1591)}),_N_E=e.O()}]);