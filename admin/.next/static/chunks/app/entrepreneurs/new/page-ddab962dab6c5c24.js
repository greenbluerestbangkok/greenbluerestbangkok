(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[549],{5187:function(e,s,a){Promise.resolve().then(a.bind(a,4481))},4481:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return i}});var t=a(7437),r=a(2265),l=a(9376),n=a(8020);function i(){let e=(0,l.useRouter)(),[s,a]=(0,r.useState)(!1),[i,c]=(0,r.useState)({name:"",description:"",category:"food",contact_info:"",location:"คลองบางมด",status:"active",image_url:""}),o=async s=>{s.preventDefault(),a(!0);try{(await fetch("/api/entrepreneurs",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)})).ok?(alert("เพิ่มผู้ประกอบการสำเร็จ!"),e.push("/entrepreneurs")):alert("เกิดข้อผิดพลาด")}catch(e){alert("เกิดข้อผิดพลาด: "+e)}finally{a(!1)}};return(0,t.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsx)("button",{onClick:()=>e.push("/entrepreneurs"),className:"text-gray-600 hover:text-gray-900 mb-4",children:"← กลับ"}),(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"เพิ่มผู้ประกอบการใหม่"})]}),(0,t.jsxs)("form",{onSubmit:o,className:"space-y-6",children:[(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"ข้อมูลผู้ประกอบการ"}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)(n.Z,{currentImage:"",onImageUpload:async e=>{let s="/images/entrepreneurs/".concat(e.name);return c({...i,image_url:s}),s},onImageRemove:()=>{c({...i,image_url:void 0})},label:"รูปภาพ/โลโก้กลุ่ม",aspectRatio:"1:1"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"form-label",children:"ชื่อกลุ่ม/ผู้ประกอบการ"}),(0,t.jsx)("input",{type:"text",value:i.name,onChange:e=>c({...i,name:e.target.value}),className:"form-input",required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"form-label",children:"คำอธิบาย"}),(0,t.jsx)("textarea",{value:i.description,onChange:e=>c({...i,description:e.target.value}),className:"form-input min-h-[150px]",required:!0})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"form-label",children:"ข้อมูลติดต่อ"}),(0,t.jsx)("textarea",{value:i.contact_info,onChange:e=>c({...i,contact_info:e.target.value}),className:"form-input min-h-[80px]",placeholder:"Tel: 081-234-5678, Line: @example"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"form-label",children:"สถานที่"}),(0,t.jsx)("input",{type:"text",value:i.location,onChange:e=>c({...i,location:e.target.value}),className:"form-input"})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"form-label",children:"หมวดหมู่"}),(0,t.jsxs)("select",{value:i.category,onChange:e=>c({...i,category:e.target.value}),className:"form-input",children:[(0,t.jsx)("option",{value:"food",children:"อาหาร"}),(0,t.jsx)("option",{value:"beauty",children:"ความงาม"}),(0,t.jsx)("option",{value:"craft",children:"งานฝีมือ"}),(0,t.jsx)("option",{value:"education",children:"การศึกษา"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"form-label",children:"สถานะ"}),(0,t.jsxs)("select",{value:i.status,onChange:e=>c({...i,status:e.target.value}),className:"form-input",children:[(0,t.jsx)("option",{value:"active",children:"ใช้งาน"}),(0,t.jsx)("option",{value:"inactive",children:"ไม่ใช้งาน"})]})]})]})]})]}),(0,t.jsxs)("div",{className:"flex justify-end space-x-4",children:[(0,t.jsx)("button",{type:"button",onClick:()=>e.push("/entrepreneurs"),className:"btn-secondary",children:"ยกเลิก"}),(0,t.jsx)("button",{type:"submit",disabled:s,className:"btn-primary disabled:opacity-50",children:s?"กำลังบันทึก...":"เพิ่มผู้ประกอบการ"})]})]})]})}},8020:function(e,s,a){"use strict";a.d(s,{Z:function(){return l}});var t=a(7437),r=a(2265);function l(e){let{currentImage:s,onImageUpload:a,onImageRemove:l,label:n="รูปภาพ",aspectRatio:i="16:9",maxSizeMB:c=5}=e,[o,d]=(0,r.useState)(s||null),[u,m]=(0,r.useState)(!1),[h,x]=(0,r.useState)(null),p=(0,r.useRef)(null),v=async e=>{var t;let r=null===(t=e.target.files)||void 0===t?void 0:t[0];if(!r)return;if(x(null),!r.type.startsWith("image/")){x("กรุณาเลือกไฟล์รูปภาพเท่านั้น");return}let l=r.size/1048576;if(l>c){x("ไฟล์มีขนาดใหญ่เกินไป (".concat(l.toFixed(2)," MB) กรุณาเลือกไฟล์ที่มีขนาดไม่เกิน ").concat(c," MB"));return}let n=new FileReader;n.onloadend=()=>{d(n.result)},n.readAsDataURL(r),m(!0);try{let e=await a(r);console.log("Image uploaded successfully:",e)}catch(e){x(e instanceof Error?e.message:"เกิดข้อผิดพลาดในการอัปโหลด"),d(s||null)}finally{m(!1)}},f=()=>{switch(i){case"1:1":return"aspect-square";case"4:3":return"aspect-[4/3]";default:return"aspect-video"}};return(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:n}),o?(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsxs)("div",{className:"relative ".concat(f()," w-full overflow-hidden rounded-lg bg-gray-100"),children:[(0,t.jsx)("img",{src:o,alt:"Preview",className:"w-full h-full object-cover"}),u&&(0,t.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center",children:(0,t.jsx)("div",{className:"spinner border-white"})})]}),(0,t.jsx)("button",{type:"button",onClick:()=>{l&&l(),d(null),p.current&&(p.current.value="")},disabled:u,className:"absolute top-2 right-2 bg-red-600 text-white p-2 rounded-full hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed",children:(0,t.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}):(0,t.jsxs)("div",{onClick:()=>{var e;return null===(e=p.current)||void 0===e?void 0:e.click()},className:"".concat(f()," w-full border-2 border-dashed border-gray-300 rounded-lg flex flex-col items-center justify-center cursor-pointer hover:border-indigo-500 hover:bg-indigo-50 transition-colors"),children:[(0,t.jsx)("svg",{className:"w-12 h-12 text-gray-400 mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"คลิกเพื่อเลือกรูปภาพ"}),(0,t.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["PNG, JPG, WEBP (ไม่เกิน ",c," MB)"]})]}),(0,t.jsx)("input",{ref:p,type:"file",accept:"image/*",onChange:v,className:"hidden"}),h&&(0,t.jsx)("div",{className:"text-sm text-red-600",children:h}),u&&(0,t.jsx)("div",{className:"text-sm text-indigo-600",children:"กำลังอัปโหลด..."})]})}},9376:function(e,s,a){"use strict";var t=a(5475);a.o(t,"useParams")&&a.d(s,{useParams:function(){return t.useParams}}),a.o(t,"useRouter")&&a.d(s,{useRouter:function(){return t.useRouter}})}},function(e){e.O(0,[971,117,744],function(){return e(e.s=5187)}),_N_E=e.O()}]);