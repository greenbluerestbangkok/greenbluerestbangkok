(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[312],{1500:function(e,s,t){Promise.resolve().then(t.bind(t,3762))},3762:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return n}});var r=t(7437),l=t(2265),a=t(9376);function n(){let[e,s]=(0,l.useState)([]),[t,n]=(0,l.useState)(!0),[i,c]=(0,l.useState)(""),[d,o]=(0,l.useState)("all"),u=(0,a.useRouter)();(0,l.useEffect)(()=>{x()},[]);let x=async()=>{try{let e=await fetch("/api/entrepreneurs");if(e.ok){let t=await e.json();s(t)}else console.error("Failed to fetch entrepreneurs")}catch(e){console.error("Error fetching entrepreneurs:",e)}finally{n(!1)}},h=async t=>{if(confirm("คุณต้องการลบผู้ประกอบการรายนี้หรือไม่?"))try{(await fetch("/api/entrepreneurs/".concat(t),{method:"DELETE"})).ok?s(e.filter(e=>e.id!==t)):alert("เกิดข้อผิดพลาดในการลบผู้ประกอบการ")}catch(e){console.error("Error deleting entrepreneur:",e),alert("เกิดข้อผิดพลาดในการลบผู้ประกอบการ")}},m=async(t,r)=>{let l="published"===r?"draft":"published";try{(await fetch("/api/entrepreneurs/".concat(t),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:l})})).ok?s(e.map(e=>e.id===t?{...e,status:l}:e)):alert("เกิดข้อผิดพลาดในการอัปเดตสถานะ")}catch(e){console.error("Error updating entrepreneur status:",e),alert("เกิดข้อผิดพลาดในการอัปเดตสถานะ")}},g=e.filter(e=>{let s=e.title.toLowerCase().includes(i.toLowerCase())||e.description.toLowerCase().includes(i.toLowerCase())||e.location.toLowerCase().includes(i.toLowerCase()),t="all"===d||e.status===d;return s&&t});return t?(0,r.jsx)("div",{className:"min-h-screen bg-gray-50 p-6",children:(0,r.jsx)("div",{className:"max-w-7xl mx-auto",children:(0,r.jsxs)("div",{className:"animate-pulse",children:[(0,r.jsx)("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-6"}),(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[...Array(6)].map((e,s)=>(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,r.jsx)("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-4"}),(0,r.jsx)("div",{className:"h-3 bg-gray-200 rounded w-1/2"})]},s))})]})})}):(0,r.jsx)("div",{className:"min-h-screen bg-gray-50 p-6",children:(0,r.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"จัดการผู้ประกอบการ"}),(0,r.jsx)("button",{onClick:()=>u.push("/entrepreneurs/new"),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"เพิ่มผู้ประกอบการใหม่"})]}),(0,r.jsx)("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:(0,r.jsxs)("div",{className:"flex flex-col md:flex-row gap-4",children:[(0,r.jsx)("div",{className:"flex-1",children:(0,r.jsx)("input",{type:"text",placeholder:"ค้นหาผู้ประกอบการ...",value:i,onChange:e=>c(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})}),(0,r.jsxs)("select",{value:d,onChange:e=>o(e.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,r.jsx)("option",{value:"all",children:"ทุกสถานะ"}),(0,r.jsx)("option",{value:"published",children:"เผยแพร่แล้ว"}),(0,r.jsx)("option",{value:"draft",children:"ร่าง"})]})]})}),(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:g.map(e=>(0,r.jsx)("div",{className:"bg-white rounded-lg shadow hover:shadow-lg transition-shadow",children:(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsx)("div",{className:"aspect-square bg-gray-200 rounded-lg mb-4 flex items-center justify-center",children:e.image_url?(0,r.jsx)("img",{src:e.image_url,alt:e.title,className:"w-full h-full object-cover rounded-lg"}):(0,r.jsx)("div",{className:"text-gray-400",children:(0,r.jsx)("svg",{className:"w-12 h-12",fill:"currentColor",viewBox:"0 0 20 20",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z",clipRule:"evenodd"})})})}),(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2 line-clamp-2",children:e.title}),(0,r.jsx)("p",{className:"text-gray-600 text-sm mb-4 line-clamp-3",children:e.description}),(0,r.jsxs)("div",{className:"flex items-center justify-between text-sm text-gray-500 mb-4",children:[(0,r.jsx)("span",{className:"bg-blue-100 text-blue-800 px-2 py-1 rounded",children:e.category}),(0,r.jsx)("span",{className:"text-xs",children:e.location})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("span",{className:"px-2 py-1 rounded text-xs ".concat("published"===e.status?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"),children:"published"===e.status?"เผยแพร่แล้ว":"ร่าง"}),(0,r.jsxs)("div",{className:"flex space-x-2",children:[(0,r.jsx)("button",{onClick:()=>m(e.id,e.status),className:"px-3 py-1 rounded text-xs ".concat("published"===e.status?"bg-yellow-100 text-yellow-800 hover:bg-yellow-200":"bg-green-100 text-green-800 hover:bg-green-200"),children:"published"===e.status?"ปิดการเผยแพร่":"เผยแพร่"}),(0,r.jsx)("button",{onClick:()=>u.push("/entrepreneurs/".concat(e.id,"/edit")),className:"bg-blue-100 text-blue-800 px-3 py-1 rounded text-xs hover:bg-blue-200",children:"แก้ไข"}),(0,r.jsx)("button",{onClick:()=>h(e.id),className:"bg-red-100 text-red-800 px-3 py-1 rounded text-xs hover:bg-red-200",children:"ลบ"})]})]})]})},e.id))}),0===g.length&&(0,r.jsxs)("div",{className:"text-center py-12",children:[(0,r.jsx)("div",{className:"text-gray-400 mb-4",children:(0,r.jsx)("svg",{className:"w-16 h-16 mx-auto",fill:"currentColor",viewBox:"0 0 20 20",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z",clipRule:"evenodd"})})}),(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"ไม่มีผู้ประกอบการ"}),(0,r.jsx)("p",{className:"text-gray-500 mb-4",children:i||"all"!==d?"ไม่พบผู้ประกอบการที่ตรงกับเงื่อนไขการค้นหา":"เริ่มต้นด้วยการเพิ่มผู้ประกอบการใหม่"}),!i&&"all"===d&&(0,r.jsx)("button",{onClick:()=>u.push("/entrepreneurs/new"),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"เพิ่มผู้ประกอบการใหม่"})]})]})})}},9376:function(e,s,t){"use strict";var r=t(5475);t.o(r,"useParams")&&t.d(s,{useParams:function(){return r.useParams}}),t.o(r,"useRouter")&&t.d(s,{useRouter:function(){return r.useRouter}})}},function(e){e.O(0,[971,117,744],function(){return e(e.s=1500)}),_N_E=e.O()}]);