(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[346],{7875:function(e,t,s){Promise.resolve().then(s.bind(s,244))},244:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return i}});var a=s(7437),n=s(2265),r=s(9376),l=s(7648);function i(){let[e,t]=(0,n.useState)([]),[s,i]=(0,n.useState)([]),[d,c]=(0,n.useState)(!0),[o,x]=(0,n.useState)(""),[m,h]=(0,n.useState)(""),[u,p]=(0,n.useState)("all"),[g,f]=(0,n.useState)(null);(0,r.useRouter)(),(0,n.useEffect)(()=>{y()},[]),(0,n.useEffect)(()=>{j()},[e,m,u]);let y=async()=>{try{c(!0);let e=await fetch("/admin/api/content/list");if(!e.ok)throw Error("Failed to load content");let s=await e.json();t(s.content)}catch(e){x(e instanceof Error?e.message:"Failed to load content")}finally{c(!1)}},j=()=>{let t=e;"all"!==u&&(t=t.filter(e=>e.type===u)),m&&(t=t.filter(e=>e.path.toLowerCase().includes(m.toLowerCase()))),i(t)},N=async(e,t)=>{try{if(!(await fetch("/admin/api/content/delete",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({path:e,sha:t})})).ok)throw Error("Failed to delete content");await y(),f(null)}catch(e){x(e instanceof Error?e.message:"Failed to delete content")}},b=e=>e.replace(/^\/content\//,"").replace(/\.(md|json)$/,""),v=e=>"md"===e?"\uD83D\uDCDD":"\uD83D\uDCC4",w=e=>"md"===e?"Markdown":"JSON";return d?(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto"}),(0,a.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading content..."})]})}):(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)("header",{className:"bg-white shadow",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"flex justify-between items-center py-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Content Management"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Manage your content files"})]}),(0,a.jsxs)("div",{className:"flex space-x-4",children:[(0,a.jsx)(l.default,{href:"/admin/content/new",className:"bg-indigo-600 text-white px-4 py-2 rounded-md hover:bg-indigo-700",children:"New Content"}),(0,a.jsx)(l.default,{href:"/admin",className:"bg-gray-600 text-white px-4 py-2 rounded-md hover:bg-gray-700",children:"Dashboard"})]})]})})}),(0,a.jsx)("main",{className:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"px-4 py-6 sm:px-0",children:[o&&(0,a.jsx)("div",{className:"mb-4 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:o}),(0,a.jsx)("div",{className:"bg-white shadow rounded-lg p-6 mb-6",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"search",className:"block text-sm font-medium text-gray-700",children:"Search"}),(0,a.jsx)("input",{type:"text",id:"search",className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Search by filename...",value:m,onChange:e=>h(e.target.value)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"typeFilter",className:"block text-sm font-medium text-gray-700",children:"Type"}),(0,a.jsxs)("select",{id:"typeFilter",className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",value:u,onChange:e=>p(e.target.value),children:[(0,a.jsx)("option",{value:"all",children:"All Types"}),(0,a.jsx)("option",{value:"md",children:"Markdown"}),(0,a.jsx)("option",{value:"json",children:"JSON"})]})]}),(0,a.jsx)("div",{className:"flex items-end",children:(0,a.jsxs)("div",{className:"text-sm text-gray-600",children:["Showing ",s.length," of ",e.length," files"]})})]})}),(0,a.jsx)("div",{className:"bg-white shadow overflow-hidden sm:rounded-md",children:0===s.length?(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)("div",{className:"text-gray-400 text-6xl mb-4",children:"\uD83D\uDCC1"}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No content found"}),(0,a.jsx)("p",{className:"text-gray-500 mb-4",children:m||"all"!==u?"Try adjusting your search or filters":"Get started by creating your first content file"}),(0,a.jsx)(l.default,{href:"/admin/content/new",className:"bg-indigo-600 text-white px-4 py-2 rounded-md hover:bg-indigo-700",children:"Create New Content"})]}):(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"File"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Path"}),(0,a.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:s.map((e,t)=>(0,a.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("span",{className:"text-2xl mr-3",children:v(e.type)}),(0,a.jsx)("div",{children:(0,a.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.path.split("/").pop()})})]})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:w(e.type)})}),(0,a.jsx)("td",{className:"px-6 py-4 text-sm text-gray-500",children:(0,a.jsx)("code",{className:"bg-gray-100 px-2 py-1 rounded text-xs",children:e.path})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:(0,a.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,a.jsx)(l.default,{href:"/admin/content/".concat(b(e.path)),className:"text-indigo-600 hover:text-indigo-900",children:"Edit"}),(0,a.jsx)("button",{onClick:()=>f(e.path),className:"text-red-600 hover:text-red-900",children:"Delete"})]})})]},t))})]})})})]})}),g&&(0,a.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:(0,a.jsx)("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:(0,a.jsxs)("div",{className:"mt-3 text-center",children:[(0,a.jsx)("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100",children:(0,a.jsx)("span",{className:"text-red-600 text-xl",children:"⚠️"})}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mt-4",children:"Delete Content"}),(0,a.jsxs)("div",{className:"mt-2 px-7 py-3",children:[(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Are you sure you want to delete this content file? This action cannot be undone."}),(0,a.jsx)("p",{className:"text-sm font-medium text-gray-900 mt-2",children:(0,a.jsx)("code",{children:g})})]}),(0,a.jsxs)("div",{className:"flex justify-center space-x-4 mt-4",children:[(0,a.jsx)("button",{onClick:()=>f(null),className:"bg-gray-300 text-gray-700 px-4 py-2 rounded-md hover:bg-gray-400",children:"Cancel"}),(0,a.jsx)("button",{onClick:()=>{let t=e.find(e=>e.path===g);(null==t?void 0:t.sha)&&N(t.path,t.sha)},className:"bg-red-600 text-white px-4 py-2 rounded-md hover:bg-red-700",children:"Delete"})]})]})})})]})}},9376:function(e,t,s){"use strict";var a=s(5475);s.o(a,"useParams")&&s.d(t,{useParams:function(){return a.useParams}}),s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}})}},function(e){e.O(0,[648,971,117,744],function(){return e(e.s=7875)}),_N_E=e.O()}]);