(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[633],{7416:function(e,t,a){Promise.resolve().then(a.bind(a,5214))},5214:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return l}});var i=a(7437),s=a(2265),r=a(7648);function l(){let[e,t]=(0,s.useState)([]),[a,l]=(0,s.useState)(!0),[c,n]=(0,s.useState)(null),[d,p]=(0,s.useState)(""),[o,m]=(0,s.useState)(""),[g,h]=(0,s.useState)({page:1,limit:20,total:0,totalPages:0}),u=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;try{l(!0);let a=new URLSearchParams({page:e.toString(),limit:"20",...d&&{search:d},...o&&{status:o}}),i=await fetch("/api/trips?".concat(a));if(!i.ok)throw Error("Failed to fetch trips");let s=await i.json();t(s.trips||[]),h(s.pagination||{page:1,limit:20,total:0,totalPages:0}),n(null),l(!1)}catch(a){console.error("Error fetching trips:",a);let e=[{id:1,name:"เที่ยวชุมชนคลองบางมด 1 วัน",shortDescription:"สัมผัสวิถีชีวิตชุมชนริมคลองบางมด",fullDescription:"ทริปท่องเที่ยวชุมชนริมคลองบางมด เรียนรู้วิถีชีวิตดั้งเดิม",price:"1,500 บาท",duration:"1 วัน",capacity:"10-15 คน",schedule:"08:00 - 17:00",mainImage:"/images/trip1/large/trip1-main.webp",gallery:["/images/trip1/large/trip1-main.webp"],highlights:["เรียนรู้วิถีชีวิตชุมชน","ล่องเรือชมธรรมชาติ","ชิมอาหารท้องถิ่น"],includes:["รถรับส่ง","อาหารกลางวัน","ไกด์ท้องถิ่น"],videoUrl:"",status:"active",featured:!0},{id:2,name:"ตลาดน้ำบางมด",shortDescription:"สัมผัสตลาดน้ำแบบดั้งเดิม",fullDescription:"เยี่ยมชมตลาดน้ำบางมด ตลาดน้ำที่ยังคงวิถีชีวิตดั้งเดิม",price:"800 บาท",duration:"ครึ่งวัน",capacity:"8-12 คน",schedule:"06:00 - 12:00",mainImage:"/images/trip2/large/trip2-main.webp",gallery:["/images/trip2/large/trip2-main.webp"],highlights:["ตลาดน้ำดั้งเดิม","อาหารพื้นบ้าน","วิถีชีวิตชุมชน"],includes:["รถรับส่ง","อาหารเช้า"],videoUrl:"",status:"active",featured:!1},{id:3,name:"ท่องเที่ยวชุมชนคลองลัดโพธิ์",shortDescription:"สัมผัสวิถีชีวิตชุมชนริมคลองลัดโพธิ์",fullDescription:"ทริปท่องเที่ยวชุมชนริมคลองลัดโพธิ์ เรียนรู้วิถีชีวิตดั้งเดิมของชาวคลอง",price:"1,200 บาท",duration:"1 วัน",capacity:"12-20 คน",schedule:"07:00 - 16:00",mainImage:"/images/trip3/large/trip3-main.webp",gallery:["/images/trip3/large/trip3-main.webp"],highlights:["ล่องเรือชมคลอง","เรียนรู้การทำเกษตร","ชิมอาหารพื้นบ้าน"],includes:["รถรับส่ง","อาหารกลางวัน","ไกด์ท้องถิ่น","อุปกรณ์ล่องเรือ"],videoUrl:"",status:"active",featured:!0},{id:4,name:"ตลาดนัดชุมชนบางมด",shortDescription:"สัมผัสตลาดนัดชุมชนบางมด",fullDescription:"เยี่ยมชมตลาดนัดชุมชนบางมด ตลาดนัดที่ยังคงวิถีชีวิตดั้งเดิม",price:"600 บาท",duration:"ครึ่งวัน",capacity:"6-10 คน",schedule:"05:00 - 11:00",mainImage:"/images/trip4/large/trip4-main.webp",gallery:["/images/trip4/large/trip4-main.webp"],highlights:["ตลาดนัดชุมชน","อาหารพื้นบ้าน","ของฝากท้องถิ่น"],includes:["รถรับส่ง","อาหารเช้า"],videoUrl:"",status:"active",featured:!1},{id:5,name:"ท่องเที่ยวชุมชนคลองบางมด 2 วัน 1 คืน",shortDescription:"สัมผัสวิถีชีวิตชุมชนริมคลองบางมด 2 วัน 1 คืน",fullDescription:"ทริปท่องเที่ยวชุมชนริมคลองบางมด 2 วัน 1 คืน เรียนรู้วิถีชีวิตดั้งเดิมแบบเต็มรูปแบบ",price:"2,800 บาท",duration:"2 วัน 1 คืน",capacity:"8-15 คน",schedule:"วันแรก 08:00 - วันที่สอง 17:00",mainImage:"/images/trip5/large/trip5-main.webp",gallery:["/images/trip5/large/trip5-main.webp"],highlights:["เรียนรู้วิถีชีวิตชุมชน","ล่องเรือชมธรรมชาติ","ชิมอาหารท้องถิ่น","พักค้างคืน"],includes:["รถรับส่ง","อาหาร 3 มื้อ","ไกด์ท้องถิ่น","ที่พัก"],videoUrl:"",status:"active",featured:!0},{id:6,name:"ตลาดน้ำคลองลัดโพธิ์",shortDescription:"สัมผัสตลาดน้ำคลองลัดโพธิ์",fullDescription:"เยี่ยมชมตลาดน้ำคลองลัดโพธิ์ ตลาดน้ำที่ยังคงวิถีชีวิตดั้งเดิม",price:"900 บาท",duration:"ครึ่งวัน",capacity:"8-12 คน",schedule:"06:00 - 12:00",mainImage:"/images/trip6/large/trip6-main.webp",gallery:["/images/trip6/large/trip6-main.webp"],highlights:["ตลาดน้ำดั้งเดิม","อาหารพื้นบ้าน","วิถีชีวิตชุมชน"],includes:["รถรับส่ง","อาหารเช้า"],videoUrl:"",status:"active",featured:!1},{id:7,name:"ท่องเที่ยวชุมชนคลองบางมด ครึ่งวัน",shortDescription:"สัมผัสวิถีชีวิตชุมชนริมคลองบางมด ครึ่งวัน",fullDescription:"ทริปท่องเที่ยวชุมชนริมคลองบางมด ครึ่งวัน เรียนรู้วิถีชีวิตดั้งเดิมแบบสั้นๆ",price:"1,000 บาท",duration:"ครึ่งวัน",capacity:"10-15 คน",schedule:"08:00 - 12:00",mainImage:"/images/trip7/large/trip7-main.webp",gallery:["/images/trip7/large/trip7-main.webp"],highlights:["เรียนรู้วิถีชีวิตชุมชน","ล่องเรือชมธรรมชาติ","ชิมอาหารท้องถิ่น"],includes:["รถรับส่ง","อาหารเช้า","ไกด์ท้องถิ่น"],videoUrl:"",status:"active",featured:!1},{id:8,name:"ตลาดนัดชุมชนคลองลัดโพธิ์",shortDescription:"สัมผัสตลาดนัดชุมชนคลองลัดโพธิ์",fullDescription:"เยี่ยมชมตลาดนัดชุมชนคลองลัดโพธิ์ ตลาดนัดที่ยังคงวิถีชีวิตดั้งเดิม",price:"700 บาท",duration:"ครึ่งวัน",capacity:"6-10 คน",schedule:"05:00 - 11:00",mainImage:"/images/trip8/large/trip8-main.webp",gallery:["/images/trip8/large/trip8-main.webp"],highlights:["ตลาดนัดชุมชน","อาหารพื้นบ้าน","ของฝากท้องถิ่น"],includes:["รถรับส่ง","อาหารเช้า"],videoUrl:"",status:"active",featured:!1},{id:9,name:"ท่องเที่ยวชุมชนคลองบางมด 3 วัน 2 คืน",shortDescription:"สัมผัสวิถีชีวิตชุมชนริมคลองบางมด 3 วัน 2 คืน",fullDescription:"ทริปท่องเที่ยวชุมชนริมคลองบางมด 3 วัน 2 คืน เรียนรู้วิถีชีวิตดั้งเดิมแบบเต็มรูปแบบ",price:"4,500 บาท",duration:"3 วัน 2 คืน",capacity:"6-12 คน",schedule:"วันแรก 08:00 - วันที่สาม 17:00",mainImage:"/images/trip9/large/trip9-main.webp",gallery:["/images/trip9/large/trip9-main.webp"],highlights:["เรียนรู้วิถีชีวิตชุมชน","ล่องเรือชมธรรมชาติ","ชิมอาหารท้องถิ่น","พักค้างคืน 2 คืน"],includes:["รถรับส่ง","อาหาร 6 มื้อ","ไกด์ท้องถิ่น","ที่พัก 2 คืน"],videoUrl:"",status:"active",featured:!0},{id:10,name:"ตลาดน้ำคลองบางมด",shortDescription:"สัมผัสตลาดน้ำคลองบางมด",fullDescription:"เยี่ยมชมตลาดน้ำคลองบางมด ตลาดน้ำที่ยังคงวิถีชีวิตดั้งเดิม",price:"750 บาท",duration:"ครึ่งวัน",capacity:"8-12 คน",schedule:"06:00 - 12:00",mainImage:"/images/trip10/large/trip10-main.webp",gallery:["/images/trip10/large/trip10-main.webp"],highlights:["ตลาดน้ำดั้งเดิม","อาหารพื้นบ้าน","วิถีชีวิตชุมชน"],includes:["รถรับส่ง","อาหารเช้า"],videoUrl:"",status:"active",featured:!1}];t(e),h({page:1,limit:20,total:e.length,totalPages:1}),n(null),l(!1)}};(0,s.useEffect)(()=>{u()},[d,o]);let x=async(e,a)=>{if(confirm('คุณต้องการลบทริป "'.concat(a,'" หรือไม่?')))try{t(t=>t.filter(t=>t.id!==e)),setTimeout(()=>{console.log("Restoring mock data after delete..."),u()},2e3),alert("ลบทริปเรียบร้อยแล้ว (Mock Data) - ทริปจะกลับมาใน 2 วินาที")}catch(e){alert(e instanceof Error?e.message:"Failed to delete trip")}},f=async(e,a)=>{let i="active"===a?"inactive":"active";try{t(t=>t.map(t=>t.id===e?{...t,status:i}:t)),alert("อัปเดตสถานะเรียบร้อยแล้ว (Mock Data): ".concat("active"===i?"เปิดใช้งาน":"ปิดใช้งาน"))}catch(e){alert(e instanceof Error?e.message:"Failed to update trip status")}};return a?(0,i.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,i.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,i.jsx)("div",{className:"spinner"})})}):(0,i.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,i.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"จัดการทริปท่องเที่ยว"}),(0,i.jsx)("p",{className:"text-gray-600",children:"จัดการข้อมูลทริปท่องเที่ยวทั้งหมด"})]}),(0,i.jsxs)("div",{className:"flex space-x-4",children:[(0,i.jsx)("button",{onClick:()=>{u(),alert("กู้คืนทริปแนะนำเรียบร้อยแล้ว!")},className:"btn-secondary",children:"\uD83D\uDD04 กู้คืนทริปแนะนำ"}),(0,i.jsx)(r.default,{href:"/trips/new",className:"btn-primary",children:"เพิ่มทริปใหม่"})]})]}),(0,i.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6",children:(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"form-label",children:"ค้นหาทริป"}),(0,i.jsx)("input",{type:"text",placeholder:"ค้นหาตามชื่อหรือคำอธิบาย...",value:d,onChange:e=>p(e.target.value),className:"form-input"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"form-label",children:"สถานะ"}),(0,i.jsxs)("select",{value:o,onChange:e=>m(e.target.value),className:"form-input",children:[(0,i.jsx)("option",{value:"",children:"ทุกสถานะ"}),(0,i.jsx)("option",{value:"active",children:"เปิดใช้งาน"}),(0,i.jsx)("option",{value:"inactive",children:"ปิดใช้งาน"}),(0,i.jsx)("option",{value:"draft",children:"ร่าง"})]})]}),(0,i.jsx)("div",{className:"flex items-end",children:(0,i.jsx)("button",{onClick:()=>u(1),className:"btn-secondary w-full",children:"ค้นหา"})})]})}),c&&(0,i.jsx)("div",{className:"alert alert-error mb-6",children:c}),(0,i.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[(0,i.jsx)("div",{className:"overflow-x-auto",children:(0,i.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,i.jsx)("thead",{className:"bg-gray-50",children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"ทริป"}),(0,i.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"ราคา"}),(0,i.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"ระยะเวลา"}),(0,i.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"สถานะ"}),(0,i.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"จัดการ"})]})}),(0,i.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:0===e.length?(0,i.jsx)("tr",{children:(0,i.jsx)("td",{colSpan:5,className:"px-6 py-12 text-center text-gray-500",children:"ไม่พบทริปท่องเที่ยว"})}):e.map(e=>(0,i.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,i.jsx)("td",{className:"px-6 py-4",children:(0,i.jsxs)("div",{className:"flex items-center",children:[e.mainImage&&(0,i.jsx)("img",{src:e.mainImage,alt:e.name,className:"h-12 w-12 rounded-lg object-cover mr-4"}),(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.name}),(0,i.jsx)("div",{className:"text-sm text-gray-500",children:e.shortDescription}),(0,i.jsxs)("div",{className:"text-xs text-gray-400",children:["ความจุ: ",e.capacity]})]})]})}),(0,i.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.price}),(0,i.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.duration}),(0,i.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,i.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,i.jsx)("span",{className:"badge ".concat("active"===e.status?"badge-success":"inactive"===e.status?"badge-error":"badge-warning"),children:"active"===e.status?"เปิดใช้งาน":"inactive"===e.status?"ปิดใช้งาน":"ร่าง"}),e.featured&&(0,i.jsx)("span",{className:"badge badge-info",children:"แนะนำ"})]})}),(0,i.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium space-x-2",children:[(0,i.jsx)(r.default,{href:"/trips/".concat(e.id),className:"text-indigo-600 hover:text-indigo-900",children:"แก้ไข"}),(0,i.jsx)("button",{onClick:()=>f(e.id,e.status),className:"".concat("active"===e.status?"text-red-600 hover:text-red-900":"text-green-600 hover:text-green-900"),children:"active"===e.status?"ปิดใช้งาน":"เปิดใช้งาน"}),(0,i.jsx)("button",{onClick:()=>x(e.id,e.name),className:"text-red-600 hover:text-red-900",children:"ลบ"})]})]},e.id))})]})}),g.totalPages>1&&(0,i.jsx)("div",{className:"bg-white px-4 py-3 border-t border-gray-200 sm:px-6",children:(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{className:"text-sm text-gray-700",children:["แสดง ",(g.page-1)*g.limit+1," ถึง"," ",Math.min(g.page*g.limit,g.total)," จาก"," ",g.total," รายการ"]}),(0,i.jsxs)("div",{className:"flex space-x-2",children:[(0,i.jsx)("button",{onClick:()=>u(g.page-1),disabled:1===g.page,className:"btn-secondary disabled:opacity-50 disabled:cursor-not-allowed",children:"ก่อนหน้า"}),(0,i.jsxs)("span",{className:"px-3 py-2 text-sm text-gray-700",children:["หน้า ",g.page," จาก ",g.totalPages]}),(0,i.jsx)("button",{onClick:()=>u(g.page+1),disabled:g.page===g.totalPages,className:"btn-secondary disabled:opacity-50 disabled:cursor-not-allowed",children:"ถัดไป"})]})]})})]})]})}}},function(e){e.O(0,[648,971,117,744],function(){return e(e.s=7416)}),_N_E=e.O()}]);