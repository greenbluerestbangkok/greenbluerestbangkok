#!/bin/bash

# ЁЯЫНя╕П р╕кр╕Др╕гр╕┤р╕Ыр╕Хр╣Мр╣Бр╕Бр╣Йр╣Др╕Вр╕Ыр╕▒р╕Нр╕лр╕▓р╣Др╕Яр╕ер╣Мр╕ар╕▓р╕Юр╕кр╕┤р╕Щр╕Др╣Йр╕▓
# р╣Гр╕Кр╣Йр╕кр╕│р╕лр╕гр╕▒р╕Ър╕кр╕гр╣Йр╕▓р╕Зр╣Др╕Яр╕ер╣Мр╕ар╕▓р╕Юр╕кр╕┤р╕Щр╕Др╣Йр╕▓р╕Чр╕╡р╣Ир╕Вр╕▓р╕Фр╕лр╕▓р╕вр╣Др╕Ы

echo "ЁЯЫНя╕П р╕кр╕Др╕гр╕┤р╕Ыр╕Хр╣Мр╣Бр╕Бр╣Йр╣Др╕Вр╕Ыр╕▒р╕Нр╕лр╕▓р╣Др╕Яр╕ер╣Мр╕ар╕▓р╕Юр╕кр╕┤р╕Щр╕Др╣Йр╕▓"
echo "=================================="

# р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╣Вр╕Яр╕ер╣Ар╕Фр╕нр╕гр╣Мр╕Хр╣Йр╕Щр╕Йр╕Ър╕▒р╕Ъ
if [ ! -d "images/products" ]; then
    echo "тЭМ р╣Др╕бр╣Ир╕Юр╕Ър╣Вр╕Яр╕ер╣Ар╕Фр╕нр╕гр╣М images/products"
    exit 1
fi

# р╕кр╕гр╣Йр╕▓р╕Зр╣Вр╕Яр╕ер╣Ар╕Фр╕нр╕гр╣Мр╕Ыр╕ер╕▓р╕вр╕Чр╕▓р╕З
mkdir -p images/webp/products

echo "ЁЯУБ р╕кр╕гр╣Йр╕▓р╕Зр╣Вр╕Яр╕ер╣Ар╕Фр╕нр╕гр╣М images/webp/products"

# р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╣Др╕Яр╕ер╣Мр╕Хр╣Йр╕Щр╕Йр╕Ър╕▒р╕Ъ
if [ -f "images/products/product_01.webp" ]; then
    echo "тЬЕ р╕Юр╕Ър╣Др╕Яр╕ер╣Мр╕Хр╣Йр╕Щр╕Йр╕Ър╕▒р╕Ъ: images/products/product_01.webp"
    
    # р╕Др╕▒р╕Фр╕ер╕нр╕Бр╣Др╕Яр╕ер╣Мр╕Хр╣Йр╕Щр╕Йр╕Ър╕▒р╕Ъ
    cp images/products/product_01.webp images/webp/products/product_01.webp
    echo "ЁЯУЛ р╕Др╕▒р╕Фр╕ер╕нр╕Б product_01.webp"
    
    # р╕кр╕гр╣Йр╕▓р╕Зр╣Др╕Яр╕ер╣Мр╕кр╕┤р╕Щр╕Др╣Йр╕▓р╕Чр╕╡р╣Ир╣Ар╕лр╕ер╕╖р╕н (2-15)
    for i in {2..15}; do
        if [ $i -lt 10 ]; then
            filename="product_0${i}.webp"
        else
            filename="product_${i}.webp"
        fi
        
        cp images/products/product_01.webp "images/webp/products/${filename}"
        echo "ЁЯУЛ р╕кр╕гр╣Йр╕▓р╕З ${filename}"
    done
    
    echo ""
    echo "ЁЯУК р╕кр╕гр╕╕р╕Ыр╣Др╕Яр╕ер╣Мр╕Чр╕╡р╣Ир╕кр╕гр╣Йр╕▓р╕З:"
    ls -la images/webp/products/product_*.webp | wc -l
    echo "р╣Др╕Яр╕ер╣Мр╕ар╕▓р╕Юр╕кр╕┤р╕Щр╕Др╣Йр╕▓"
    
    echo ""
    echo "тЬЕ р╣Ар╕кр╕гр╣Зр╕Ир╕кр╕┤р╣Йр╕Щр╕Бр╕▓р╕гр╕кр╕гр╣Йр╕▓р╕Зр╣Др╕Яр╕ер╣Мр╕ар╕▓р╕Юр╕кр╕┤р╕Щр╕Др╣Йр╕▓"
    echo "ЁЯМР р╕Чр╕Фр╕кр╕нр╕Ър╕Чр╕╡р╣И: http://localhost:8002/pages/products.html"
    
else
    echo "тЭМ р╣Др╕бр╣Ир╕Юр╕Ър╣Др╕Яр╕ер╣Мр╕Хр╣Йр╕Щр╕Йр╕Ър╕▒р╕Ъ: images/products/product_01.webp"
    echo "ЁЯУЛ р╣Др╕Яр╕ер╣Мр╕Чр╕╡р╣Ир╕бр╕╡р╕нр╕вр╕╣р╣Ир╣Гр╕Щр╣Вр╕Яр╕ер╣Ар╕Фр╕нр╕гр╣М products:"
    ls -la images/products/
fi
