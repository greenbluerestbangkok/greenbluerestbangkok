#!/bin/bash

# ЁЯз╣ р╕кр╕Др╕гр╕┤р╕Ыр╕Хр╣М Cleanup р╕нр╕▒р╕Хр╣Вр╕Щр╕бр╕▒р╕Хр╕┤
# р╣Гр╕Кр╣Йр╕кр╕│р╕лр╕гр╕▒р╕Ър╕ер╕Ър╣Др╕Яр╕ер╣Мр╕Чр╕╡р╣Ир╣Др╕бр╣Ир╕Ир╕│р╣Ар╕Ыр╣Зр╕Щр╣Бр╕ер╕░р╕Ир╕▒р╕Фр╕гр╕░р╣Ар╕Ър╕╡р╕вр╕Ър╣Ар╕зр╣Зр╕Ър╣Др╕Лр╕Хр╣М

echo "ЁЯз╣ р╣Ар╕гр╕┤р╣Ир╕бр╕Хр╣Йр╕Щр╕Бр╕▓р╕г Cleanup р╣Ар╕зр╣Зр╕Ър╣Др╕Лр╕Хр╣М..."
echo "======================================"

# р╕ер╕Ър╣Др╕Яр╕ер╣М .DS_Store
echo "ЁЯЧСя╕П р╕ер╕Ър╣Др╕Яр╕ер╣М .DS_Store..."
find . -name ".DS_Store" -delete
echo "тЬЕ р╕ер╕Ър╣Др╕Яр╕ер╣М .DS_Store р╣Ар╕кр╕гр╣Зр╕Ир╕кр╕┤р╣Йр╕Щ"

# р╕ер╕Ър╣Вр╕Яр╕ер╣Ар╕Фр╕нр╕гр╣М backup р╣Ар╕Бр╣Ир╕▓
echo "ЁЯЧСя╕П р╕ер╕Ър╣Вр╕Яр╕ер╣Ар╕Фр╕нр╕гр╣М backup р╣Ар╕Бр╣Ир╕▓..."
rm -rf images_backup_*
echo "тЬЕ р╕ер╕Ър╣Вр╕Яр╕ер╣Ар╕Фр╕нр╕гр╣М backup р╣Ар╕Бр╣Ир╕▓р╣Ар╕кр╕гр╣Зр╕Ир╕кр╕┤р╣Йр╕Щ"

# р╕ер╕Ър╣Др╕Яр╕ер╣Мр╕Чр╕╡р╣Ир╕Лр╣Йр╕│р╕Лр╣Йр╕нр╕Щ
echo "ЁЯЧСя╕П р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╣Др╕Яр╕ер╣Мр╕Чр╕╡р╣Ир╕Лр╣Йр╕│р╕Лр╣Йр╕нр╕Щ..."
if [ -f "main.html" ]; then
    echo "тЪая╕П р╕Юр╕Ър╣Др╕Яр╕ер╣М main.html р╕Чр╕╡р╣Ир╕Лр╣Йр╕│р╕Лр╣Йр╕нр╕Щр╕Бр╕▒р╕Ъ index.html"
    rm main.html
    echo "тЬЕ р╕ер╕Ър╣Др╕Яр╕ер╣М main.html р╣Ар╕кр╕гр╣Зр╕Ир╕кр╕┤р╣Йр╕Щ"
fi

# р╕ер╕Ър╣Др╕Яр╕ер╣М log р╣Бр╕ер╕░ cache
echo "ЁЯЧСя╕П р╕ер╕Ър╣Др╕Яр╕ер╣М log р╣Бр╕ер╕░ cache..."
find . -name "*.log" -delete
find . -name "*.cache" -delete
find . -name "*.tmp" -delete
echo "тЬЕ р╕ер╕Ър╣Др╕Яр╕ер╣М log р╣Бр╕ер╕░ cache р╣Ар╕кр╕гр╣Зр╕Ир╕кр╕┤р╣Йр╕Щ"

# р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╣Др╕Яр╕ер╣Мр╕гр╕╣р╕Ыр╕ар╕▓р╕Юр╕Чр╕╡р╣Ир╕Лр╣Йр╕│р╕Лр╣Йр╕нр╕Щ
echo "ЁЯФН р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╣Др╕Яр╕ер╣Мр╕гр╕╣р╕Ыр╕ар╕▓р╕Юр╕Чр╕╡р╣Ир╕Лр╣Йр╕│р╕Лр╣Йр╕нр╕Щ..."
if [ -d "images" ] && [ -d "images/webp" ]; then
    echo "ЁЯУБ р╕Юр╕Ър╣Вр╕Яр╕ер╣Ар╕Фр╕нр╕гр╣Мр╕гр╕╣р╕Ыр╕ар╕▓р╕Юр╕Чр╕▒р╣Йр╕Зр╣Бр╕Ър╕Ър╣Ар╕Бр╣Ир╕▓р╣Бр╕ер╕░р╣Гр╕лр╕бр╣И"
    echo "ЁЯТб р╣Бр╕Щр╕░р╕Щр╕│: р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕зр╣Ир╕▓р╕Хр╣Йр╕нр╕Зр╕Бр╕▓р╕гр╕ер╕Ър╕гр╕╣р╕Ыр╕ар╕▓р╕Юр╣Ар╕Бр╣Ир╕▓р╕лр╕гр╕╖р╕нр╣Др╕бр╣И"
fi

# р╣Бр╕кр╕Фр╕Зр╕кр╕гр╕╕р╕Ы
echo ""
echo "ЁЯОЙ р╕Бр╕▓р╕г Cleanup р╣Ар╕кр╕гр╣Зр╕Ир╕кр╕┤р╣Йр╕Щ!"
echo "======================================"
echo "ЁЯУК р╕кр╕гр╕╕р╕Ыр╕Бр╕▓р╕гр╕Чр╕│р╕Зр╕▓р╕Щ:"
echo "   тЬЕ р╕ер╕Ър╣Др╕Яр╕ер╣М .DS_Store"
echo "   тЬЕ р╕ер╕Ър╣Вр╕Яр╕ер╣Ар╕Фр╕нр╕гр╣М backup р╣Ар╕Бр╣Ир╕▓"
echo "   тЬЕ р╕ер╕Ър╣Др╕Яр╕ер╣Мр╕Чр╕╡р╣Ир╕Лр╣Йр╕│р╕Лр╣Йр╕нр╕Щ"
echo "   тЬЕ р╕ер╕Ър╣Др╕Яр╕ер╣М log р╣Бр╕ер╕░ cache"
echo ""
echo "ЁЯТб р╕Др╕│р╣Бр╕Щр╕░р╕Щр╕│р╣Ар╕Юр╕┤р╣Ир╕бр╣Ар╕Хр╕┤р╕б:"
echo "   - р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╣Др╕Яр╕ер╣Мр╕гр╕╣р╕Ыр╕ар╕▓р╕Юр╕Чр╕╡р╣Ир╕Лр╣Йр╕│р╕Лр╣Йр╕нр╕Щ"
echo "   - р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ъ CSS р╕Чр╕╡р╣Ир╣Др╕бр╣Ир╣Др╕Фр╣Йр╣Гр╕Кр╣Й"
echo "   - р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ъ JavaScript р╕Чр╕╡р╣Ир╣Др╕бр╣Ир╣Др╕Фр╣Йр╣Гр╕Кр╣Й"
echo ""
echo "ЁЯФз р╕кр╕│р╕лр╕гр╕▒р╕Ър╕Бр╕▓р╕г Cleanup р╣Бр╕Ър╕Ър╕ер╕░р╣Ар╕нр╕╡р╕вр╕Ф:"
echo "   ./scripts/cleanup-advanced.sh"
