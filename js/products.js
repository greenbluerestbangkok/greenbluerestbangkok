// ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ä‡∏∏‡∏°‡∏ä‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î 15 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£
import { IMAGE_CONFIG } from './config.js';

export const productsData = [
    {
        id: 1,
        name: "‡∏™‡∏ö‡∏π‡πà‡πÅ‡∏Æ‡∏ô‡∏î‡πå‡πÄ‡∏°‡∏î‡∏ô‡πâ‡∏≥‡∏°‡∏±‡∏ô‡∏°‡∏∞‡∏û‡∏£‡πâ‡∏≤‡∏ß",
        price: "80 ‡∏ö‡∏≤‡∏ó",
        category: "beauty",
        description: "‡∏™‡∏ö‡∏π‡πà‡∏ò‡∏£‡∏£‡∏°‡∏ä‡∏≤‡∏ï‡∏¥‡∏à‡∏≤‡∏Å‡∏ô‡πâ‡∏≥‡∏°‡∏±‡∏ô‡∏°‡∏∞‡∏û‡∏£‡πâ‡∏≤‡∏ß‡∏ö‡∏£‡∏¥‡∏™‡∏∏‡∏ó‡∏ò‡∏¥‡πå ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏™‡∏≤‡∏£‡πÄ‡∏Ñ‡∏°‡∏µ",
        image: IMAGE_CONFIG.getProductImageUrlByNumber(1),
        producer: "‡πÄ‡∏ã‡∏ü‡∏ï‡∏¥‡∏™‡∏ó‡πå‡∏ü‡∏≤‡∏£‡πå‡∏°"
    },
    {
        id: 2,
        name: "‡∏ô‡πâ‡∏≥‡∏™‡πâ‡∏°‡∏Ñ‡∏±‡πâ‡∏ô‡∏™‡∏î‡∏à‡∏≤‡∏Å‡∏™‡∏ß‡∏ô",
        price: "50 ‡∏ö‡∏≤‡∏ó",
        category: "food",
        description: "‡∏ô‡πâ‡∏≥‡∏™‡πâ‡∏°‡∏Ñ‡∏±‡πâ‡∏ô‡∏™‡∏î‡∏à‡∏≤‡∏Å‡∏™‡∏ß‡∏ô‡∏ú‡∏•‡πÑ‡∏°‡πâ‡πÉ‡∏ô‡∏ä‡∏∏‡∏°‡∏ä‡∏ô ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏ô‡πâ‡∏≥‡∏ï‡∏≤‡∏•‡πÄ‡∏û‡∏¥‡πà‡∏°",
        image: IMAGE_CONFIG.getProductImageUrlByNumber(2),
        producer: "‡πÄ‡∏ã‡∏ü‡∏ï‡∏¥‡∏™‡∏ó‡πå‡∏ü‡∏≤‡∏£‡πå‡∏°"
    },
    {
        id: 3,
        name: "‡∏Ç‡∏ô‡∏°‡πÑ‡∏ó‡∏¢‡πÇ‡∏ö‡∏£‡∏≤‡∏ì (‡∏ä‡∏∏‡∏î‡∏£‡∏ß‡∏°)",
        price: "120 ‡∏ö‡∏≤‡∏ó",
        category: "food",
        description: "‡∏Ç‡∏ô‡∏°‡πÑ‡∏ó‡∏¢‡πÇ‡∏ö‡∏£‡∏≤‡∏ì‡∏´‡∏•‡∏≤‡∏Å‡∏´‡∏•‡∏≤‡∏¢‡∏ä‡∏ô‡∏¥‡∏î ‡∏ó‡∏≥‡∏™‡∏î‡πÉ‡∏´‡∏°‡πà‡∏ó‡∏∏‡∏Å‡∏ß‡∏±‡∏ô",
        image: IMAGE_CONFIG.getProductImageUrlByNumber(3),
        producer: "‡∏ö‡πâ‡∏≤‡∏ô‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡∏ß‡∏≤‡∏î‡πÅ‡∏•‡∏∞‡∏†‡∏≤‡∏û‡∏û‡∏¥‡∏°‡∏û‡πå"
    },
    {
        id: 4,
        name: "‡∏ú‡πâ‡∏≤‡∏Ç‡∏≤‡∏ß‡∏°‡πâ‡∏≤‡∏ó‡∏≠‡∏°‡∏∑‡∏≠",
        price: "250 ‡∏ö‡∏≤‡∏ó",
        category: "craft",
        description: "‡∏ú‡πâ‡∏≤‡∏Ç‡∏≤‡∏ß‡∏°‡πâ‡∏≤‡∏ó‡∏≠‡∏°‡∏∑‡∏≠‡πÅ‡∏ö‡∏ö‡∏î‡∏±‡πâ‡∏á‡πÄ‡∏î‡∏¥‡∏° ‡∏•‡∏ß‡∏î‡∏•‡∏≤‡∏¢‡∏™‡∏ß‡∏¢‡∏á‡∏≤‡∏°",
        image: IMAGE_CONFIG.getProductImageUrlByNumber(4),
        producer: "‡∏ö‡πâ‡∏≤‡∏ô‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡∏ß‡∏≤‡∏î‡πÅ‡∏•‡∏∞‡∏†‡∏≤‡∏û‡∏û‡∏¥‡∏°‡∏û‡πå"
    },
    {
        id: 5,
        name: "‡∏ô‡πâ‡∏≥‡∏û‡∏£‡∏¥‡∏Å‡πÅ‡∏Å‡∏á‡πÑ‡∏ó‡∏¢‡πÅ‡∏ó‡πâ",
        price: "90 ‡∏ö‡∏≤‡∏ó",
        category: "food",
        description: "‡∏ô‡πâ‡∏≥‡∏û‡∏£‡∏¥‡∏Å‡πÅ‡∏Å‡∏á‡∏™‡∏π‡∏ï‡∏£‡πÇ‡∏ö‡∏£‡∏≤‡∏ì ‡∏à‡∏≤‡∏Å‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÄ‡∏ó‡∏®‡πÅ‡∏ó‡πâ",
        image: IMAGE_CONFIG.getProductImageUrlByNumber(5),
        producer: "‡∏ï‡∏•‡∏≤‡∏î‡∏°‡∏î‡∏ï‡∏∞‡∏ô‡∏≠‡∏¢"
    },
    {
        id: 6,
        name: "‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏õ‡∏±‡πâ‡∏ô‡∏î‡∏¥‡∏ô‡πÄ‡∏ú‡∏≤",
        price: "300 ‡∏ö‡∏≤‡∏ó",
        category: "craft",
        description: "‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏õ‡∏±‡πâ‡∏ô‡∏î‡∏¥‡∏ô‡πÄ‡∏ú‡∏≤‡πÅ‡∏ö‡∏ö‡πÇ‡∏ö‡∏£‡∏≤‡∏ì ‡∏•‡∏ß‡∏î‡∏•‡∏≤‡∏¢‡∏ó‡πâ‡∏≠‡∏á‡∏ñ‡∏¥‡πà‡∏ô",
        image: IMAGE_CONFIG.getProductImageUrlByNumber(6),
        producer: "‡∏Å‡∏±‡∏°‡∏õ‡∏á‡πÉ‡∏ô‡∏î‡∏á‡∏õ‡∏£‡∏∑‡∏≠"
    },
    {
        id: 7,
        name: "‡∏ô‡πâ‡∏≥‡∏°‡∏±‡∏ô‡∏´‡∏≠‡∏°‡∏£‡∏∞‡πÄ‡∏´‡∏¢‡∏ò‡∏£‡∏£‡∏°‡∏ä‡∏≤‡∏ï‡∏¥",
        price: "150 ‡∏ö‡∏≤‡∏ó",
        category: "beauty",
        description: "‡∏ô‡πâ‡∏≥‡∏°‡∏±‡∏ô‡∏´‡∏≠‡∏°‡∏£‡∏∞‡πÄ‡∏´‡∏¢‡∏à‡∏≤‡∏Å‡∏™‡∏°‡∏∏‡∏ô‡πÑ‡∏û‡∏£‡πÑ‡∏ó‡∏¢‡πÅ‡∏ó‡πâ",
        image: IMAGE_CONFIG.getProductImageUrlByNumber(7),
        producer: "‡∏ß‡∏¥‡∏™‡∏≤‡∏´‡∏Å‡∏¥‡∏à‡∏ä‡∏∏‡∏°‡∏ä‡∏ô‡∏≠‡∏≤‡∏£‡∏¢‡∏∞‡∏Ñ‡∏•‡∏≠‡∏á‡∏ö‡∏≤‡∏á‡∏°‡∏î‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏™‡∏£‡∏£‡∏Ñ‡πå"
    },
    {
        id: 8,
        name: "‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏à‡∏±‡∏Å‡∏™‡∏≤‡∏ô‡πÑ‡∏°‡πâ‡πÑ‡∏ú‡πà",
        price: "200 ‡∏ö‡∏≤‡∏ó",
        category: "craft",
        description: "‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏à‡∏±‡∏Å‡∏™‡∏≤‡∏ô‡πÑ‡∏°‡πâ‡πÑ‡∏ú‡πà‡πÅ‡∏ö‡∏ö‡∏î‡∏±‡πâ‡∏á‡πÄ‡∏î‡∏¥‡∏°",
        image: IMAGE_CONFIG.getProductImageUrlByNumber(8),
        producer: "Art Lab"
    },
    {
        id: 9,
        name: "‡∏Ñ‡∏£‡∏µ‡∏°‡∏ö‡∏≥‡∏£‡∏∏‡∏á‡∏ú‡∏¥‡∏ß‡∏™‡∏°‡∏∏‡∏ô‡πÑ‡∏û‡∏£",
        price: "180 ‡∏ö‡∏≤‡∏ó",
        category: "beauty",
        description: "‡∏Ñ‡∏£‡∏µ‡∏°‡∏ö‡∏≥‡∏£‡∏∏‡∏á‡∏ú‡∏¥‡∏ß‡∏à‡∏≤‡∏Å‡∏™‡∏°‡∏∏‡∏ô‡πÑ‡∏û‡∏£‡πÑ‡∏ó‡∏¢",
        image: IMAGE_CONFIG.getProductImageUrlByNumber(9),
        producer: "S'more town"
    },
    {
        id: 10,
        name: "‡∏ú‡∏•‡πÑ‡∏°‡πâ‡∏™‡∏î‡∏à‡∏≤‡∏Å‡∏™‡∏ß‡∏ô",
        price: "80 ‡∏ö‡∏≤‡∏ó",
        category: "food",
        description: "‡∏ú‡∏•‡πÑ‡∏°‡πâ‡∏™‡∏î‡∏à‡∏≤‡∏Å‡∏™‡∏ß‡∏ô‡πÉ‡∏ô‡∏ä‡∏∏‡∏°‡∏ä‡∏ô",
        image: IMAGE_CONFIG.getProductImageUrlByNumber(10),
        producer: "‡∏ô‡∏¥‡∏ó‡∏≤‡∏ô‡∏®‡∏¥‡∏•‡∏õ‡πå @‡∏ö‡πâ‡∏≤‡∏ô‡∏î‡∏£‡∏∏‡∏ì"
    },
    {
        id: 11,
        name: "‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÄ‡∏á‡∏¥‡∏ô‡πÅ‡∏Æ‡∏ô‡∏î‡πå‡πÄ‡∏°‡∏î",
        price: "800 ‡∏ö‡∏≤‡∏ó",
        category: "craft",
        description: "‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÄ‡∏á‡∏¥‡∏ô‡πÅ‡∏Æ‡∏ô‡∏î‡πå‡πÄ‡∏°‡∏î‡πÅ‡∏ö‡∏ö‡πÇ‡∏ö‡∏£‡∏≤‡∏ì",
        image: IMAGE_CONFIG.getProductImageUrlByNumber(11),
        producer: "‡∏ö‡πâ‡∏≤‡∏ô‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡∏ß‡∏≤‡∏î‡πÅ‡∏•‡∏∞‡∏†‡∏≤‡∏û‡∏û‡∏¥‡∏°‡∏û‡πå"
    },
    {
        id: 12,
        name: "‡∏ô‡πâ‡∏≥‡∏™‡∏°‡∏∏‡∏ô‡πÑ‡∏û‡∏£‡πÑ‡∏ó‡∏¢",
        price: "100 ‡∏ö‡∏≤‡∏ó",
        category: "food",
        description: "‡∏ô‡πâ‡∏≥‡∏™‡∏°‡∏∏‡∏ô‡πÑ‡∏û‡∏£‡πÑ‡∏ó‡∏¢‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û",
        image: IMAGE_CONFIG.getProductImageUrlByNumber(12),
        producer: "‡∏ß‡∏¥‡∏™‡∏≤‡∏´‡∏Å‡∏¥‡∏à‡∏ä‡∏∏‡∏°‡∏ä‡∏ô‡∏≠‡∏≤‡∏£‡∏¢‡∏∞‡∏Ñ‡∏•‡∏≠‡∏á‡∏ö‡∏≤‡∏á‡∏°‡∏î‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏™‡∏£‡∏£‡∏Ñ‡πå"
    },
    {
        id: 13,
        name: "‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÅ‡∏Å‡πâ‡∏ß‡πÄ‡∏õ‡πà‡∏≤‡πÅ‡∏Æ‡∏ô‡∏î‡πå‡πÄ‡∏°‡∏î",
        price: "500 ‡∏ö‡∏≤‡∏ó",
        category: "craft",
        description: "‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÅ‡∏Å‡πâ‡∏ß‡πÄ‡∏õ‡πà‡∏≤‡πÅ‡∏Æ‡∏ô‡∏î‡πå‡πÄ‡∏°‡∏î‡πÅ‡∏ö‡∏ö‡πÇ‡∏ö‡∏£‡∏≤‡∏ì",
        image: IMAGE_CONFIG.getProductImageUrlByNumber(13),
        producer: "Art Lab"
    },
    {
        id: 14,
        name: "‡πÅ‡∏ä‡∏°‡∏û‡∏π‡∏™‡∏°‡∏∏‡∏ô‡πÑ‡∏û‡∏£‡∏ò‡∏£‡∏£‡∏°‡∏ä‡∏≤‡∏ï‡∏¥",
        price: "150 ‡∏ö‡∏≤‡∏ó",
        category: "beauty",
        description: "‡πÅ‡∏ä‡∏°‡∏û‡∏π‡∏™‡∏°‡∏∏‡∏ô‡πÑ‡∏û‡∏£‡∏ò‡∏£‡∏£‡∏°‡∏ä‡∏≤‡∏ï‡∏¥ ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏™‡∏≤‡∏£‡πÄ‡∏Ñ‡∏°‡∏µ",
        image: IMAGE_CONFIG.getProductImageUrlByNumber(14),
        producer: "‡πÄ‡∏ã‡∏ü‡∏ï‡∏¥‡∏™‡∏ó‡πå‡∏ü‡∏≤‡∏£‡πå‡∏°"
    },
    {
        id: 15,
        name: "‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏´‡∏ô‡∏±‡∏á‡πÅ‡∏Æ‡∏ô‡∏î‡πå‡πÄ‡∏°‡∏î",
        price: "350 ‡∏ö‡∏≤‡∏ó",
        category: "craft",
        description: "‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏´‡∏ô‡∏±‡∏á‡πÅ‡∏Æ‡∏ô‡∏î‡πå‡πÄ‡∏°‡∏î‡πÅ‡∏ö‡∏ö‡∏î‡∏±‡πâ‡∏á‡πÄ‡∏î‡∏¥‡∏°",
        image: IMAGE_CONFIG.getProductImageUrlByNumber(15),
        producer: "‡∏Å‡∏±‡∏°‡∏õ‡∏á‡πÉ‡∏ô‡∏î‡∏á‡∏õ‡∏£‡∏∑‡∏≠"
    }
];

// ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡πÅ‡∏•‡∏∞‡∏Å‡∏£‡∏≠‡∏á
let filteredProducts = [...productsData];
let currentCategory = 'all';
let currentSearch = '';
let searchTimeout = null;

// ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Å‡∏≤‡∏£‡πÇ‡∏´‡∏•‡∏î‡∏†‡∏≤‡∏û
function handleImageLoad(img) {
    // ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏ó‡∏≥‡∏≠‡∏∞‡πÑ‡∏£ - ‡πÅ‡∏™‡∏î‡∏á‡∏†‡∏≤‡∏û‡∏ó‡∏±‡∏ô‡∏ó‡∏µ
}

// ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡∏Ç‡∏≠‡∏á‡∏†‡∏≤‡∏û
function handleImageError(img) {
    // ‡πÉ‡∏ä‡πâ‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û placeholder ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÇ‡∏´‡∏•‡∏î‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ
    img.src = 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgdmlld0JveD0iMCAwIDIwMCAyMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIyMDAiIGhlaWdodD0iMjAwIiBmaWxsPSIjRjhGOUZBIi8+CjxwYXRoIGQ9Ik0xMDAgMTIwQzExMC40NTcgMTIwIDExOSAxMTEuNDU3IDExOSAxMDFDMTE5IDkwLjU0MjkgMTEwLjQ1NyA4MiAxMDAgODJDODkuNTQyOSA4MiA4MSA5MC41NDI5IDgxIDEwMUM4MSAxMTEuNDU3IDg5LjU0MjkgMTIwIDEwMCAxMjBaIiBmaWxsPSIjNjY2Ii8+CjxwYXRoIGQ9Ik0xMDAgMTQwQzExMC40NTcgMTQwIDExOSAxMzEuNDU3IDExOSAxMjFDMTE5IDExMC41NDMgMTEwLjQ1NyAxMDIgMTAwIDEwMkM4OS41NDI5IDEwMiA4MSAxMTAuNTQzIDgxIDEyMUM4MSAxMzEuNDU3IDg5LjU0MjkgMTQwIDEwMCAxNDBaIiBmaWxsPSIjNjY2Ii8+Cjwvc3ZnPgo=';
    img.alt = '‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÇ‡∏´‡∏•‡∏î‡∏†‡∏≤‡∏û‡πÑ‡∏î‡πâ';
}

// ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡πå‡∏î‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤
function createProductCard(product) {
    return `
        <div class="product-card" data-category="${product.category}" data-producer="${product.producer}">
            <div class="product-image-container">
                <img src="${product.image}" 
                     alt="${product.name}" 
                     class="product-img" 
                     onerror="handleImageError(this)">
                <div class="product-overlay">
                    <span class="producer-badge">${product.producer}</span>
                </div>
            </div>
            <div class="product-body">
                <h3 class="product-title">${product.name}</h3>
                <p class="product-description">${product.description}</p>
                <p class="product-price">${product.price}</p>
                <div class="product-actions">
                    <button class="btn btn-order">‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠</button>
                    <span class="product-category">${getCategoryName(product.category)}</span>
                </div>
            </div>
        </div>
    `;
}

// ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÅ‡∏õ‡∏•‡∏á‡∏ä‡∏∑‡πà‡∏≠‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà
function getCategoryName(category) {
    const categories = {
        'food': '‡∏≠‡∏≤‡∏´‡∏≤‡∏£',
        'craft': '‡∏á‡∏≤‡∏ô‡∏ù‡∏µ‡∏°‡∏∑‡∏≠',
        'beauty': '‡∏Ñ‡∏ß‡∏≤‡∏°‡∏á‡∏≤‡∏°',
        'home': '‡∏Ç‡∏≠‡∏á‡πÉ‡∏ä‡πâ‡πÉ‡∏ô‡∏ö‡πâ‡∏≤‡∏ô'
    };
    return categories[category] || category;
}

// ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÅ‡∏™‡∏î‡∏á‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤
function displayProducts(products) {
    const productsGrid = document.getElementById('products-grid');
    // ======================================== -->
    // üö® SECURITY FIX: ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç XSS vulnerability
    // ‡πÅ‡∏ó‡∏ô‡∏ó‡∏µ‡πà innerHTML ‡∏î‡πâ‡∏ß‡∏¢ textContent ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢
    // ======================================== -->

    // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏™‡∏£‡πâ‡∏≤‡∏á HTML string ‡∏ó‡∏µ‡πà‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢
    function createSafeNoResultsHTML() {
        return '<div class="no-results">‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤</div>';
    }

    function createSafeProductsHTML(products) {
        return products.map(product => createProductCard(product)).join('');
    }

    // ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ innerHTML
    if (products.length === 0) {
        productsGrid.innerHTML = createSafeNoResultsHTML();
    } else {
        productsGrid.innerHTML = createSafeProductsHTML(products);
    }
}

// ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤
function searchProducts() {
    const searchTerm = document.getElementById('searchInput').value.toLowerCase().trim();
    currentSearch = searchTerm;
    
    filteredProducts = productsData.filter(product => {
        const matchesSearch = product.name.toLowerCase().includes(searchTerm) ||
                             product.description.toLowerCase().includes(searchTerm) ||
                             product.producer.toLowerCase().includes(searchTerm);
        const matchesCategory = currentCategory === 'all' || product.category === currentCategory;
        
        return matchesSearch && matchesCategory;
    });
    
    displayProducts(filteredProducts);
    updateResultsCount();
}

// ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡πÅ‡∏ö‡∏ö debounced
function debouncedSearch() {
    if (searchTimeout) {
        clearTimeout(searchTimeout);
    }
    
    searchTimeout = setTimeout(() => {
        searchProducts();
    }, 300);
}

// ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏Å‡∏£‡∏≠‡∏á‡∏ï‡∏≤‡∏°‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà
function filterByCategory(category) {
    currentCategory = category;
    
    // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏õ‡∏∏‡πà‡∏°‡∏Å‡∏£‡∏≠‡∏á
    document.querySelectorAll('.filter-btn').forEach(btn => {
        btn.classList.remove('active');
    });
    event.target.classList.add('active');
    
    // ‡∏Å‡∏£‡∏≠‡∏á‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤
    filteredProducts = productsData.filter(product => {
        const matchesSearch = product.name.toLowerCase().includes(currentSearch) ||
                             product.description.toLowerCase().includes(currentSearch) ||
                             product.producer.toLowerCase().includes(searchTerm);
        const matchesCategory = category === 'all' || product.category === category;
        
        return matchesSearch && matchesCategory;
    });
    
    displayProducts(filteredProducts);
    updateResultsCount();
}

// ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏•‡πâ‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤
function clearSearch() {
    document.getElementById('searchInput').value = '';
    currentSearch = '';
    currentCategory = 'all';
    
    // ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏õ‡∏∏‡πà‡∏°‡∏Å‡∏£‡∏≠‡∏á
    document.querySelectorAll('.filter-btn').forEach(btn => {
        btn.classList.remove('active');
    });
    document.querySelector('[data-category="all"]').classList.add('active');
    
    filteredProducts = [...productsData];
    displayProducts(filteredProducts);
    updateResultsCount();
}

// ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå
function updateResultsCount() {
    const resultsCount = document.createElement('div');
    resultsCount.className = 'results-count';
    resultsCount.textContent = `‡∏û‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ ${filteredProducts.length} ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£`;
    
    const existingCount = document.querySelector('.results-count');
    if (existingCount) {
        existingCount.remove();
    }
    
    document.querySelector('.search-container').after(resultsCount);
}

// ‡πÄ‡∏û‡∏¥‡πà‡∏° Event Listeners ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÇ‡∏´‡∏•‡∏î‡∏´‡∏ô‡πâ‡∏≤
document.addEventListener('DOMContentLoaded', function() {
    // ‡πÅ‡∏™‡∏î‡∏á‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
    displayProducts(filteredProducts);
    updateResultsCount();
    
    // Event listener ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏õ‡∏∏‡πà‡∏°‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤
    document.getElementById('searchBtn').addEventListener('click', searchProducts);
    
    // Event listener ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏Å‡∏î Enter ‡πÉ‡∏ô‡∏ä‡πà‡∏≠‡∏á‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤
    document.getElementById('searchInput').addEventListener('keypress', function(e) {
        if (e.key === 'Enter') {
            searchProducts();
        }
    });
    
    // Event listener ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏õ‡∏∏‡πà‡∏°‡∏•‡πâ‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤
    document.getElementById('clearSearch').addEventListener('click', clearSearch);
    
    // Event listeners ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏õ‡∏∏‡πà‡∏°‡∏Å‡∏£‡∏≠‡∏á‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà
    document.querySelectorAll('.filter-btn').forEach(btn => {
        btn.addEventListener('click', function() {
            filterByCategory(this.dataset.category);
        });
    });
    
    // Event listener ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏û‡∏¥‡∏°‡∏û‡πå‡πÉ‡∏ô‡∏ä‡πà‡∏≠‡∏á‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤ (‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡πÅ‡∏ö‡∏ö debounced)
    document.getElementById('searchInput').addEventListener('input', function() {
        if (this.value.trim() === '') {
            clearSearch();
        } else {
            debouncedSearch();
        }
    });
    
    // ======================================== -->
    // üö® PERFORMANCE FIX: ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç setTimeout ‡πÇ‡∏î‡∏¢‡πÉ‡∏ä‡πâ debounce
    // ‡πÄ‡∏û‡∏¥‡πà‡∏° cleanup ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô memory leak
    // ======================================== -->
    
    // Debounce function ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏à‡∏≥‡∏Å‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏Å search function
    function debounce(func, wait) {
        let timeout;
        return function executedFunction(...args) {
            const later = () => {
                clearTimeout(timeout);
                func(...args);
            };
            clearTimeout(timeout);
            timeout = setTimeout(later, wait);
        };
    }
    
    // ‡πÉ‡∏ä‡πâ debounce ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö search function
    const debouncedSearch = debounce(function(searchTerm) {
        const filteredProducts = productsData.filter(product => 
            product.name.toLowerCase().includes(searchTerm.toLowerCase()) ||
            product.description.toLowerCase().includes(searchTerm.toLowerCase())
        );
        displayProducts(filteredProducts);
    }, 300);
    
    // ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç search input event
    const searchInput = document.getElementById('searchInput');
    searchInput.addEventListener('input', function() {
        const searchTerm = this.value.trim();
        if (searchTerm === '') {
            displayProducts(productsData); // ‡πÅ‡∏™‡∏î‡∏á‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Ñ‡∏•‡∏¥‡∏Å‡∏•‡πâ‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤
        } else {
            debouncedSearch(searchTerm);
        }
    });
    
    // Cleanup function
    function cleanupProducts() {
        if (searchTimeout) {
            clearTimeout(searchTimeout);
        }
        // ‡∏•‡πâ‡∏≤‡∏á event listeners ‡∏≠‡∏∑‡πà‡∏ô‡πÜ ‡∏ñ‡πâ‡∏≤‡∏°‡∏µ
    }
    
    // Cleanup ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏ß‡πá‡∏ö‡∏ñ‡∏π‡∏Å unload
    window.addEventListener('beforeunload', cleanupProducts);
    window.addEventListener('pagehide', cleanupProducts);

});
